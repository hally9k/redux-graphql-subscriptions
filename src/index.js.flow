// @flow
export type SubscriptionPayload = {
    key: string,
    onError: (payload: Array<GraphQLError>) => ReduxAction<Array<GraphQLError>>,
    onMessage: (payload: GraphQLResponse) => ReduxAction<GraphQLResponse>,
    onUnsubscribe: (payload: string) => ReduxAction<string>,
    query: string,
    variables?: {}
}

export type ReduxActionIn =
    | ReduxAction<SubscriptionPayload>
    | ReduxAction<string>

export type ReduxActionOut =
    | ReduxAction<GraphQLResponse>
    | ReduxAction<Array<GraphQLError>>
    | ReduxAction<any>

declare function createMiddleware<AppState>(
    url: string,
    options: {
        connectionOptions?: {},
        reconnect?: boolean
    }
): ReduxMiddleware<AppState, ReduxActionIn, ReduxActionOut>

declare function connect(): ReduxAction<*>

declare function disconnect(): ReduxAction<*>

declare function subscribe(
    payload: SubscriptionPayload
): ReduxAction<SubscriptionPayload>

declare function unsubscribe(payload: string): ReduxAction<string>

export { createMiddleware, subscribe, unsubscribe, connect, disconnect }
